# File: azure-pipelines\build-broker-host.yml
# Description: Generate BrokerHost APK
# use <project>_branch variables to build the Local version
# use <project>_version variables to build the Dist version
# Variable '[adal, common, msal, ad_accounts]_branch' was defined in the Variables tab
# Variable '[adal, common, msal, ad_accounts]_version' was defined in the Variables tab
# Variable: 'ENV_VSTS_MVN_ANDROID_MSAL_USERNAME' was defined in the Variables tab
# Variable: 'mvnAccessToken' was defined in the Variables tab
# https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate
name: $(date:yyyyMMdd)$(rev:.r)

trigger: none
pr: none

resources:
  pipelines:
  - pipeline: authenticator  # identifier for the resource used in pipeline resource variables
    connection: MSAZURE_SC
    project: One # project for the source; optional for current project
    source: AndroidBuild  # name of the pipeline that produces an artifact

    
jobs:
- job: brokerhost
  displayName: test
  pool:
    name: Hosted Windows 2019 with VS2019
  steps:
  - checkout: none
  - pwsh: echo "hola mundo"
  - task: DownloadPipelineArtifact@2
    displayName: Download Pipeline Artifacts
    inputs:
      artifact: MicrosoftAuthenticatorAndroid
      path: $(Build.SourcesDirectory)
  - pwsh: dir
    workingDirectory: $(Build.SourcesDirectory)
    displayName: list files